# Cutie 项目代码统计报告

生成时间：2025-10-10

## 📊 总体概览

| 分类 | 代码行数 | 文件数 | 占比 |
|------|----------|--------|------|
| **前端代码** | 20,206 行 | 115 | 46.8% |
| **后端代码** | 22,934 行 | 142 | 53.2% |
| **总计** | **43,140 行** | **257** | 100% |

### 额外资源
- 配置文件：1,407 行
- SQL迁移：467 行
- 项目文档：12,350 行 (CLAUDE.md + docs/ + references/)
- 样式文件：208 行

## 🎨 前端代码详细统计 (20,206 行)

### 按模块分类

| 模块 | 代码行数 | 文件数 | 占比 | 说明 |
|------|----------|--------|------|------|
| **Vue组件** | 8,106 | 44 | 40.1% | UI组件和页面 |
| **Composables** | 4,156 | - | 20.6% | 可复用逻辑 |
| **Pinia Stores** | 3,885 | - | 19.2% | 状态管理 |
| **Views视图** | 1,604 | - | 7.9% | 页面视图 |
| **Services服务** | 1,396 | - | 6.9% | API调用、事件、日志 |
| **Types类型** | 744 | - | 3.7% | TypeScript类型定义 |
| **其他** | 315 | - | 1.6% | 路由、工具等 |

### Vue组件细分

| 组件类型 | 文件数 | 说明 |
|----------|--------|------|
| **Parts** | 26 | 基础UI组件（Kanban、Calendar、Checkbox等） |
| **Templates** | 3 | 布局模板 |
| **Functional** | ~15 | 功能性组件 |

### 关键模块代码分布

**Composables (4,156行)**
- `drag/` - 拖拽系统（跨视图、自动滚动、策略）
- `calendar/` - 日历相关（事件、拖拽、时间定位）
- `useTaskOperations.ts` - 任务操作
- `useViewTasks.ts` - 视图任务管理

**Pinia Stores (3,885行)**
- `task/` - 任务store（模块化）
- `timeblock.ts` - 时间块store
- `area.ts` - 区域store
- `trash/` - 垃圾箱store
- `template/` - 模板store
- `view.ts` - 视图store
- `shared/` - 共享工具（correlation-tracker、error-handler）

**Services (1,396行)**
- `logger.ts` - 日志核心 (550行)
- `loggerSettings.ts` - 日志设置 (242行)
- `loggerConfig.ts` - 日志配置 (134行)
- `viewAdapter.ts` - 视图适配器 (159行)
- `events.ts` - SSE事件订阅 (38行)
- `errorHandler.ts` - 错误处理 (74行)

## 🦀 后端代码详细统计 (22,934 行)

### 按模块分类

| 模块 | 代码行数 | 文件数 | 占比 | 说明 |
|------|----------|--------|------|------|
| **Features功能** | 14,889 | - | 64.9% | 业务功能模块 |
| **Shared共享** | 3,408 | - | 14.9% | 跨功能基础设施 |
| **Entities实体** | 2,217 | - | 9.7% | 领域模型和DTOs |
| **Startup启动** | 526 | - | 2.3% | 应用初始化 |
| **其他** | 1,894 | - | 8.3% | 配置、工具等 |

### Features功能模块细分

主要功能模块（SFC架构）：
- `tasks/` - 任务管理（CRUD、Schedule、完成/重开）
- `time_blocks/` - 时间块管理（创建、链接、更新）
- `templates/` - 模板系统
- `trash/` - 垃圾箱
- `areas/` - 区域管理
- `views/` - 视图查询（staging、daily、planned等）
- `view_preferences/` - 视图偏好设置

### Entities实体层 (2,217行)

领域模型和DTOs：
- `task/` - 任务实体（model、request_dtos、response_dtos）
- `time_block/` - 时间块实体
- `schedule/` - 日程实体
- `area/` - 区域实体
- `template/` - 模板实体
- `view_preference/` - 视图偏好实体

### Shared共享模块 (3,408行)

跨功能基础设施：
- `core/` - 错误处理、工具函数
- `database/` - 数据库连接、分页
- `events/` - SSE事件系统
- `http/` - HTTP响应、中间件、提取器
- `ports/` - 抽象接口（Clock、IdGenerator）

## 📁 项目文件结构统计

### 总文件数概览

| 类型 | 数量 |
|------|------|
| **Rust文件** | 142 |
| **TypeScript文件** | 71 |
| **Vue组件** | 44 |
| **文档Markdown** | ~30 |
| **配置文件** | ~15 |

### 目录结构深度

前端主要目录：
```
src/
├── components/     (44个Vue组件)
├── composables/    (20+个可复用逻辑)
├── stores/         (7个模块化store)
├── views/          (5个主视图)
├── types/          (类型定义)
├── services/       (核心服务)
└── router/         (路由配置)
```

后端主要目录：
```
src-tauri/src/
├── features/       (7个功能模块)
│   ├── tasks/
│   ├── time_blocks/
│   ├── templates/
│   ├── trash/
│   ├── areas/
│   ├── views/
│   └── shared/
├── entities/       (6个实体定义)
├── shared/         (跨功能基础设施)
├── startup/        (应用启动)
└── config/         (配置管理)
```

## 📈 代码质量指标

### 模块化程度

**前端**
- Store模块化：✅ 7个独立store
- Composables复用：✅ 20+个可复用逻辑
- 组件分层：✅ parts/templates/functional三层

**后端**
- SFC模式：✅ 每个endpoint独立文件
- 分层架构：✅ Features/Entities/Shared清晰分离
- 共享资源：✅ Repository/Assembler统一管理

### 代码复用率

| 指标 | 数值 |
|------|------|
| **Composables** | 4,156行 (20.6%前端代码) |
| **Shared Modules** | 3,408行 (14.9%后端代码) |
| **Entities复用** | 2,217行 (跨所有features) |

### 文档覆盖率

| 文档类型 | 行数 | 说明 |
|----------|------|------|
| **CLAUDE.md** | 560 | 项目开发指南 |
| **API文档** | ~4,000 | CABC规范文档 |
| **架构文档** | ~3,000 | 设计与架构说明 |
| **开发经验** | ~2,000 | Lessons Learned |
| **其他文档** | ~2,790 | 周报、工具、规范 |
| **总计** | 12,350 | 文档/代码比 = 28.6% |

## 🎯 代码规模对比

### 与知名项目对比

| 项目 | 代码规模 | Cutie相对规模 |
|------|----------|--------------|
| **TodoMVC (Vue)** | ~300行 | 143倍 ✅ |
| **Realworld (Vue3)** | ~3,000行 | 14倍 ✅ |
| **中小型SaaS** | 30,000-50,000行 | 接近 ✅ |
| **大型企业应用** | 100,000+行 | 未达到 |

**结论：** Cutie已达到**中型应用**规模

### 前后端代码比例

```
前端: 20,206行 (46.8%)
后端: 22,934行 (53.2%)
```

接近1:1的平衡，显示全栈开发均衡。

## 📊 代码增长趋势

根据git历史统计（过去15天）：
- 新增：147,603行
- 删除：57,108行
- 净增长：90,495行

**当前代码量形成历程：**
- 初始架构（09-26前）：~0行
- 架构奠基期（09-26至09-30）：+39,453行
- 功能爆发期（10-01至10-05）：+30,000+行
- 功能完善期（10-06至10-10）：+21,042行

## 🏆 代码质量亮点

### 1. 高文档覆盖率
- 文档/代码比 = 28.6%
- CABC规范完整覆盖所有endpoints
- 完善的架构和开发指南

### 2. 良好的模块化
- **前端**：Composables占20.6%，高复用率
- **后端**：Shared模块占14.9%，避免重复
- **分层清晰**：Entities/Features/Shared分离

### 3. 代码组织规范
- **SFC模式**：每个endpoint独立文件
- **Feature-Sliced**：按业务功能垂直切分
- **命名规范**：统一的命名约定

### 4. 测试覆盖
- E2E测试套件：96.7%通过率
- 关键功能均有测试

## 📌 统计方法说明

**包含：**
- ✅ src/ 目录所有源代码
- ✅ src-tauri/src/ 目录所有源代码
- ✅ 业务逻辑代码
- ✅ 配置代码

**排除：**
- ❌ node_modules/ 依赖
- ❌ target/ Rust编译产物
- ❌ dist/ 构建产物
- ❌ src-legacy/ 遗留代码
- ❌ .git/ 版本控制
- ❌ 自动生成的代码

**统计工具：**
- `find` + `wc -l` 精确统计
- 手动分类整理

## 🎉 总结

Cutie项目有效代码规模：

- **核心代码**: 43,140行
- **文档资料**: 12,350行
- **配置/SQL**: 1,874行
- **总计**: 57,364行

**特点：**
1. ✅ **中型应用规模** - 超过4万行有效代码
2. ✅ **全栈均衡** - 前后端代码比例接近1:1
3. ✅ **高质量文档** - 文档占比28.6%
4. ✅ **良好模块化** - 20%+代码为可复用模块
5. ✅ **规范架构** - SFC + Feature-Sliced清晰分层

**适合场景：**
- 桌面任务管理应用
- 全栈TypeScript/Rust开发参考
- 架构设计学习案例
- 中型项目最佳实践

---

*统计时间：2025-10-10*
*项目版本：dev分支最新提交*
